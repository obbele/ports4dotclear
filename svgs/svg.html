<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>XML-RPC post preview</title>
    <style type="text/css">
        body { 
            width : 57em;
            margin : 1em auto;
            color : #111;
            background : #eee;
        }
        pre { 
            margin : 0 8em; 
            padding : 0.5em 2em;
            background : #ddd;
        }
    </style>
</head>
<body>

	<p style="width:14em; margin:auto; padding:1em; text-align:center;">
		<object data="/blog/public/SVG.svg" type="image/svg+xml">
			<p>can't read SVG ? go 
			<a href="www.getfirefox.com">www.getfirefox.com</a></p>
		</object>
		<br />
		(<a href="/blog/public/SVG.svg">SVG source</a>)
	</p>

	<p>SVG diagrams are scalable. They should be a perfect fit for this elastic
	CSS theme. Let's try.</p>

	<!-- :::::::::: EXCERPT SEPARATOR :::::::::: -->

	<p style="width:23em; float:right; padding:1em; text-align:center;">
		<object data="/blog/public/git_branches.svg" type="image/svg+xml">
			<p>can't read SVG ? go 
			<a href="www.getfirefox.com">www.getfirefox.com</a></p>
		</object>
		<br />
		(<a href="/blog/public/git_branches.svg">SVG source</a>)
	</p>
	
	<p>Can we made diagram floating to the right ? Yes we can ! Nevertheless,
	if you want to write a description beside your diagram, it would be smarter
	to include theses comments directly inside the SVG document. You will loose
	HTML features (no href ?) but you will less likely mess up your layout. And
	no, current CSS and XHTML are really a pain in the a** to use for someone
	wanting a decent content layout (and no good kids should dare using a
	<code>&lt;table&gt;</code> in this case).</p>

	<h3>How to insert SVG</h3>

	<p>I've found (too?) many solutions on the Internet on how to insert SVG
	directly inside a (x)HTML document. You can use the <code>&lt;object
		/&gt;</code> tag, the <code>&lt;embed /&gt;</code> one or simply try to
	insert the svg inline (modulo some XML namespace declaration).</p>

	<p>Well, the <code>&lt;embed /&gt;</code> tag is not part of the XHTML spec,
	so let's forget about it. Inline SVG may work, and both the <a href="http://www.w3.org/TR/XHTMLplusMathMLplusSVG/">W3C</a> and the <a href="https://developer.mozilla.org/en/SVG_In_HTML_Introduction">Mozilla
		Developer Center</a> provide examples, but the former is a bit too
	complex for me and the latter does not solve any problem since I do not
	know any people able to write SVG markup from scratch.</p>

	<p>On to the <code>&lt;object /&gt;</code> method then ! You simply have to
	write something looking like:</p>

<!-- code ! highlight -f -S HTML -X
<object data="filename.svg" type="image/svg+xml">
	<!- - fall-back content - ->
	<p>can't read SVG ? go download
	<a href="http://www.getfirefox.com">Firefox</a>
	</p>
	<!- - end of fall-back content - ->
</object> 
-->

<pre>
<span class="hl kwa">&lt;object</span> <span class="hl kwb">data</span>=<span class="hl str">"filename.svg"</span> <span class="hl kwb">type</span>=<span class="hl str">"image/svg+xml"</span><span class="hl kwa">&gt;</span>
	<span class="hl com">&lt;!-- fall-back content --&gt;</span>
	<span class="hl kwa">&lt;p&gt;</span>can't read SVG ? go download
	<span class="hl kwa">&lt;a</span> <span class="hl kwb">href</span>=<span class="hl str">"http://www.getfirefox.com"</span><span class="hl kwa">&gt;</span>Firefox<span class="hl kwa">&lt;/a&gt;</span>
	<span class="hl kwa">&lt;/p&gt;</span>
	<span class="hl com">&lt;!-- end of fall-back content --&gt;</span>
<span class="hl kwa">&lt;/object&gt;</span> 
</pre>

	<p>Note that <code>object</code> elements are displayed inline in HTML, as
	the <code>&lt;a&gt; &lt;em&gt; &lt;i&gt; ...</code> elements. So you may
	want to surround them in a <code>&lt;div&gt;</code> or
	<code>&lt;p&gt;</code> block or use the CSS property
	<code>style="display:block;"</code>.</p>

	<p>Do not forget to add somewhere a XML attribute
	<code>width="Xem"</code> or <code>height="Xem"</code>
	to be able to scale the SVG image. Remember that if we go through all this
	trouble, it's mainly to get scalable graphic in our documents. By instance,
	the following template / <a href="http://www.vim.org/scripts/script.php?script_id=2540">snippet</a>
	could come in handy:</p>

<!-- code ! highlight -f -S HTML -X
snippet svg
	<p style="width:${1:width}; margin:auto; padding:1em; text-align:center;">
		<object data="${2:url}" type="image/svg+xml">
			can't read SVG ? go 
			<a href="www.getfirefox.com">get firefox</a> !
		</object>
		<br />
		(<a href="${3:$2}">SVG source</a>)
	</p>
-->
<pre>
snippet svg
	<span class="hl kwa">&lt;p</span> <span class="hl kwb">style</span>=<span class="hl str">"width:${1:width}; margin:auto; padding:1em; text-align:center;"</span><span class="hl kwa">&gt;</span>
		<span class="hl kwa">&lt;object</span> <span class="hl kwb">data</span>=<span class="hl str">"${2:url}"</span> <span class="hl kwb">type</span>=<span class="hl str">"image/svg+xml"</span><span class="hl kwa">&gt;</span>
			can't read SVG ? go 
			<span class="hl kwa">&lt;a</span> <span class="hl kwb">href</span>=<span class="hl str">"www.getfirefox.com"</span><span class="hl kwa">&gt;</span>get firefox<span class="hl kwa">&lt;/a&gt;</span> !
		<span class="hl kwa">&lt;/object&gt;</span>
		<span class="hl kwa">&lt;br /&gt;</span>
		(<span class="hl kwa">&lt;a</span> <span class="hl kwb">href</span>=<span class="hl str">"${3:$2}"</span><span class="hl kwa">&gt;</span>SVG source<span class="hl kwa">&lt;/a&gt;</span>)
	<span class="hl kwa">&lt;/p&gt;</span>
</pre>

	<h3>It ain't working !</h3>

	<p>Despite using the <code>&lt;object /&gt;</code> tag, the SVG image
	doesn't display correctly ? Do some vertical or horizontal scrollbars
	appear around ? Is the image cropped ?</p>

	<p>I cannot really explain why, but the SVG file needs a small tweak to fix
	theses problems: you must manually edit it to add a <code>viewBox</code>
	declaration and properly modify the <code>width</code> and
	<code>height</code> ones.</p>

	<p>Usually, I just set both <code>width</code> and <code>height</code> to
	100%, hopefully meaning that the SVG object will scale to the full size of
	its HTML parent. Next I assign a string <code>"0 0 width height"</code> to
	viewBox. I assume values default to pixel "px" units, but you can try to
	use "pt", "cm" or "ft" instead.</p>

	<p>The head of the modified SVG file looks like this:</p>


<!-- code ! highlight -f -S SVG -X
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   ...
   width="100%"
   height="100%"
   viewBox="0 0 275 308"
   ...
-->
<pre>
<span class="hl kwa">&lt;?xml</span> <span class="hl kwb">version</span>=<span class="hl str">"1.0"</span> <span class="hl kwb">encoding</span>=<span class="hl str">"UTF-8"</span> <span class="hl kwb">standalone</span>=<span class="hl str">"no"</span><span class="hl kwa">?&gt;</span>
<span class="hl kwa">&lt;svg</span>
   ...
   <span class="hl kwb">width</span>=<span class="hl str">"100%"</span>
   <span class="hl kwb">height</span>=<span class="hl str">"100%"</span>
   <span class="hl kwb">viewBox</span>=<span class="hl str">"0 0 275 308"</span>
   ...
</pre>

	<p>Hint: in Inkscape, before saving your document, go to File -&gt;
	Document Properties (Shift+Ctrl+D) and press "Fit page to slection" to
	adjust the document size.</p>

	<h3>It's not usable</h3>

	<p>And you know it !</p>

	<p>Well it's true that we could probably use the help of some automation
	script around here to post-process the head of the SVG file and ease the
	insertion into HTML documents. A plugin for DotClear2 in PHP with some
	basic XML parsing should be able to do it. If I can cure my lazyness, I
	shall look at it in the future.</p>

	<p><em>/DS</em></p>
</body>
</html>
